<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Attendance | ITFIC Solutions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            scroll-behavior: smooth;
        }
        .hero {
            background: linear-gradient(135deg, #0d6efd, #6610f2);
            color: white;
        }
        .stat-card {
            transition: transform 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-6px);
        }
    </style>
</head>

<body class="bg-light">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">üéì ITFIC Solutions</a>

        <div class="d-flex">
            {% if user.is_authenticated %}
                <a href="{% url 'login_redirect' %}" class="btn btn-primary btn-sm me-2">
                    Dashboard
                </a>
                <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">
                    Logout
                </a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-light btn-sm me-2">
                    Login
                </a>
                <a href="{% url 'signup' %}" class="btn btn-warning btn-sm">
                    Sign Up
                </a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- HERO -->
<section class="hero py-5 text-center">
    <div class="container">
        <h1 class="display-4 fw-bold">Smart Attendance System</h1>
        <p class="lead mt-3">
            AI Face Recognition ‚Ä¢ GPS Geofencing ‚Ä¢ Real-Time Tracking
        </p>
    </div>
</section>

<!-- FEATURES -->
<section class="container my-5">
    <div class="row text-center">
        <div class="col-md-4 mb-4">
            <div class="card shadow stat-card h-100 p-4">
                <h4>ü§ñ AI Verification</h4>
                <p class="text-muted mt-2">
                    Prevent proxy attendance using live face matching.
                </p>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card shadow stat-card h-100 p-4">
                <h4>üìç GPS Geofencing</h4>
                <p class="text-muted mt-2">
                    Attendance allowed only inside classroom radius.
                </p>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card shadow stat-card h-100 p-4">
                <h4>üìä Live Dashboard</h4>
                <p class="text-muted mt-2">
                    Faculty monitors attendance in real-time.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- LIVE STATS -->
<section class="container my-5">
    <div class="row mb-4 text-center">
        <h3 class="fw-bold">Live System Statistics</h3>
        <p class="text-muted">Auto-updated from backend API</p>
    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow p-4 h-100">
                <h5 class="mb-3">User Distribution</h5>
                <canvas id="userChart"></canvas>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card shadow p-4 h-100">
                <h5 class="mb-3">Weekly Attendance</h5>
                <canvas id="attendanceChart"></canvas>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer class="bg-dark text-white text-center py-3 mt-5">
    <small>¬© 2025 ITFIC Solutions | Smart Attendance System</small>
</footer>

<!-- DYNAMIC JS -->
<script>
fetch("/api/home-stats/")
.then(response => response.json())
.then(data => {

    new Chart(document.getElementById("userChart"), {
        type: "doughnut",
        data: {
            labels: ["Students", "Faculty", "Admins"],
            datasets: [{
                data: [data.students, data.faculty, data.admins]
            }]
        }
    });

    new Chart(document.getElementById("attendanceChart"), {
        type: "bar",
        data: {
            labels: data.days,
            datasets: [{
                label: "Present Students",
                data: data.attendance
            }]
        }
    });

});
</script>

</body>
</html>
